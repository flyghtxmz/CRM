<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Botzap CRM - Ferramentas</title>
    <meta name="description" content="Botzap CRM - Ferramentas" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div>
        <div class="brand">Botzap CRM</div>
        <div class="subtitle">Ferramentas <span class="version">v1.04</span></div>
      </div>
      <div class="topbar-actions">
        <a class="ghost link" href="/app.html">Conversas</a>
        <a class="ghost link" href="/contacts.html">Contatos</a>
        <a class="ghost link" href="/flows.html">Fluxos</a>
        <a class="ghost link" href="/logs.html">Logs</a>
        <a class="ghost link" href="/clicks.html">Clicks no Link</a>
        <a class="ghost link" href="/status.html">Status</a>
        <button id="logout" class="ghost" type="button">Sair</button>
      </div>
    </header>

    <main class="layout">
      <div class="tools-grid">
        <section class="card">
          <h1>Enviar mensagem</h1>
          <p class="hint">Use um numero de WhatsApp real para testar o envio.</p>
          <form id="send-form">
            <label>
              Numero (E.164)
              <input name="to" placeholder="5511999999999" required />
            </label>
            <label>
              Mensagem
              <textarea name="message" rows="4" placeholder="Ola!" required></textarea>
            </label>
            <button type="submit">Enviar mensagem</button>
          </form>
          <pre id="send-result" class="result" aria-live="polite"></pre>
        </section>

        <section class="card">
          <h1>Criar template</h1>
          <p class="hint">Crie um template simples para a revisao da Meta.</p>
          <form id="template-form">
            <label>
              Nome do template
              <input name="name" placeholder="boas_vindas" required />
            </label>
            <label>
              Categoria
              <select name="category" required>
                <option value="MARKETING">MARKETING</option>
                <option value="UTILITY">UTILITY</option>
                <option value="AUTHENTICATION">AUTHENTICATION</option>
              </select>
            </label>
            <label>
              Idioma
              <input name="language" value="pt_BR" required />
            </label>
            <label>
              Corpo do template
              <textarea name="body" rows="4" placeholder="Ola {{1}}, seu pedido {{2}} foi confirmado." required></textarea>
            </label>
            <button type="submit">Criar template</button>
          </form>
          <pre id="template-result" class="result" aria-live="polite"></pre>
        </section>

        <section class="card">
          <h1>Phone Number ID</h1>
          <p class="hint">Liste os numeros vinculados a sua WABA e copie o ID.</p>
          <button type="button" id="phone-numbers">Buscar numeros</button>
          <pre id="phone-result" class="result" aria-live="polite"></pre>
        </section>

        <section class="card">
          <h1>Mudar foto</h1>
          <p class="hint">Atualiza a foto do WhatsApp Business (JPG/PNG, ate 5MB).</p>
          <p class="hint">Requer variavel de ambiente <code>WHATSAPP_APP_ID</code>.</p>
          <form id="profile-photo-form">
            <label>
              Arquivo de imagem
              <input name="photo_file" type="file" accept="image/jpeg,image/png" required />
            </label>
            <button type="submit">Atualizar foto</button>
          </form>
          <pre id="profile-photo-result" class="result" aria-live="polite"></pre>
        </section>

        <section class="card">
          <h1>Teste de clique</h1>
          <p class="hint">Simula um clique do EncurtaLink e grava a mensagem na conversa.</p>
          <form id="track-form">
            <label>
              Numero (wa_id)
              <input name="wa_id" placeholder="5511999999999" required />
            </label>
            <label>
              Link curto (opcional)
              <input name="short" placeholder="https://encurtalink.pages.dev/s/ABC123.jpg" />
            </label>
            <label>
              Link final (opcional)
              <input name="target" placeholder="https://seusite.com.br" />
            </label>
            <button type="submit">Simular clique</button>
          </form>
          <pre id="track-result" class="result" aria-live="polite"></pre>
        </section>

        <section class="card">
          <h1>Biblioteca de audios</h1>
          <p class="hint">Upload com conversao obrigatoria para OGG/Opus, renomear e apagar.</p>
          <form id="audio-upload-form">
            <label>
              Nome do audio (opcional)
              <input name="audio_name" placeholder="Ex.: Boas-vindas" />
            </label>
            <label>
              Arquivo de audio
              <input id="audio-file" name="audio_file" type="file" accept="audio/*" required />
            </label>
            <button type="submit">Converter e enviar</button>
          </form>
          <div class="tools-actions">
            <button type="button" id="audio-refresh">Atualizar lista</button>
          </div>
          <pre id="audio-upload-result" class="result" aria-live="polite"></pre>
          <div id="audio-library-empty" class="hint">Nenhum audio carregado.</div>
          <div id="audio-library-list" class="audio-library-list"></div>
        </section>

        <section class="card">
          <h1>Canva</h1>
          <p class="hint">Crie fluxos e tags visuais em um canva no estilo Manychat.</p>
          <a class="ghost link button-link" href="/flows.html">Abrir canva</a>
        </section>

        <section class="card">
          <h1>Logs</h1>
          <p class="hint">Veja o que o webhook executou nos fluxos.</p>
          <a class="ghost link button-link" href="/logs.html">Abrir Logs</a>
        </section>

        <section class="card">
          <h1>Status</h1>
          <p class="hint">Diagnostico rapido de ambiente e API.</p>
          <a class="ghost link button-link" href="/status.html">Abrir Status</a>
        </section>

        <section class="card">
          <h1>Documentacao e video</h1>
          <ol>
            <li>Grave um video enviando mensagem pelo app e recebendo no WhatsApp.</li>
            <li>Grave outro video criando um template de mensagem.</li>
            <li>Envie os dois videos na analise do app.</li>
          </ol>
          <p class="hint">Teste rapido do webhook (usa o token configurado no servidor).</p>
          <button type="button" id="webhook-test">Testar webhook</button>
          <pre id="webhook-result" class="result" aria-live="polite"></pre>
          <p class="hint">Veja detalhes em <a href="/privacy.html">Politica de Privacidade</a>.</p>
        </section>
      </div>
    </main>

    <footer class="footer">
      <span>Botzap CRM</span>
      <span class="dot">|</span>
      <a href="/privacy.html">Politica de Privacidade</a>
    </footer>

    <script src="/app.js"></script>
  </body>
</html>
